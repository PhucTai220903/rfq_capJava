sap.ui.define(["rfqportal/controller/BaseController","sap/m/MessageToast","sap/f/library","sap/ui/core/mvc/XMLView","sap/ui/model/Filter","sap/ui/model/FilterOperator"],(t,e,o,n,i,s)=>{"use strict";return t.extend("rfqportal.controller.VendorView",{onInit(){const t=this.getRouter();t.getRoute("RouteVendor").attachPatternMatched(this._onRouteMatched,this)},_onRouteMatched(){this._updateLayout(o.LayoutType.OneColumn)},_bindVendorTable(){const t=this.byId("vendorTable");const e=this.getView().getModel();t.unbindItems();t.bindItems({path:"/Vendors",template:new sap.m.ColumnListItem({press:this.onVendorPress.bind(this),type:"Navigation",cells:[new sap.m.Text({text:"{ID}"}),new sap.m.Text({text:"{name}"}),new sap.m.Text({text:"{email}"}),new sap.m.Text({text:"{country}"}),new sap.m.ObjectStatus({text:{path:"status",formatter:this.formatStatus.bind(this)},state:{path:"status",formatter:this.formatStatusState.bind(this)}})]}),parameters:{expand:"rfqs,quotations",select:"ID,name,email,country,status,created_at,contactPerson,phone,address,website,rfqCount,quotationCount"}})},onVendorPress(t){const o=t.getSource().getBindingContext();if(!o){e.show("No vendor data found");return}const n=o.getProperty("ID");this._showVendorDetail(n,o)},_showVendorDetail(t,i){const s=this.byId("fcl");if(!s){return}if(!this._oVendorDetailView){n.create({id:this.getView().getId()+"--vendorDetail",viewName:"rfqportal.view.viewAdmin.VendorDetail"}).then(t=>{this._oVendorDetailView=t;this._oVendorDetailView.setModel(this.getView().getModel());s.addMidColumnPage(this._oVendorDetailView);this._oVendorDetailView.setBindingContext(i);const e=this._oVendorDetailView.getController();if(e&&e.setBindingContext){e.setBindingContext(i)}this._updateLayout(o.LayoutType.TwoColumnsMidExpanded)}).catch(t=>{e.show("Error loading vendor details")})}else{this._oVendorDetailView.setBindingContext(i);const t=this._oVendorDetailView.getController();if(t&&t.setBindingContext){t.setBindingContext(i)}this._updateLayout(o.LayoutType.TwoColumnsMidExpanded)}},onRFQPress(t){const o=t.getSource().getBindingContext();const n=o.getProperty("rfq_id");e.show(`Navigate to RFQ: ${n}`)},onViewRFQQuotations(t){const o=t.getSource().getBindingContext();const n=o.getProperty("rfq_id");const i=o.getProperty("supplier_id");e.show(`Loading quotations for RFQ ${n}`)},_updateLayout(t){const e=this.byId("fcl");if(e){e.setLayout(t)}},onCloseDetail(){this._updateLayout(o.LayoutType.OneColumn)},onRefresh(){const t=this.byId("vendorTable");if(t&&t.getBinding("items")){t.getBinding("items").refresh();e.show("Vendor list refreshed")}},onSearch(t){const e=t.getParameter("newValue");const o=this.byId("vendorTable");const n=o.getBinding("items");if(e&&e.length>0){const t=[new i("name",s.Contains,e),new i("email",s.Contains,e),new i("country",s.Contains,e)];const o=new i(t,false);n.filter([o])}else{n.filter([])}}})});
//# sourceMappingURL=VendorView.controller.js.map